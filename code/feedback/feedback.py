from fastapi import APIRouter, Query, HTTPException, status
# from ai.code.database import database
from typing import List
from gpt_communication.gpt_communication import *
import json


router = APIRouter(
    tags=["feedback"],
    responses={404: {"description" : "Not Found"}},
)



@router.get("/readInfo", summary="ì‚¬ìš©ì ì •ë³´ ì…ë ¥")
async def feedback(info: List[str] = Query(..., description="ì‚¬ìš©ì ì •ë³´ ëª©ë¡", max_length=8)):
    
    """
    ì‚¬ìš©ì ì¼ì • ì •ë³´ë¥¼ ì…ëŸ­ë°›ëŠ” ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
    - í˜•ì‹
    - /readInfo?info=ìƒë…„ì›”ì¼?info=ì „ê³µ?info=í¬ë§ì§ì¢…?info=ì·¨ì—…ê¸°ê°„?info=ì¼ì •ì œëª©?info=ê¸°ê°„?info=í•„ìˆ˜ì¼ì •?info=ë¹„ê³ 
        - ìƒë…„ì›”ì¼ : yyyymmdd
        - ì „ê³µ : ex)ì†Œí”„íŠ¸ì›¨ì–´, ê¸°ê³„ê³µí•™
        - í¬ë§ì§ì¢… : ex)ì›¹ ê°œë°œì, ì„ë² ë””ë“œ ê°œë°œì, ë””ìì´ë„ˆ
        - ì·¨ì—…ê¸°ê°„ : në…„mê°œì›” : nmm ex) 1ë…„2ê°œì›”: 102, 0ë…„ 6ê°œì›”: 006
        - ì¼ì •ì œëª©: ex) ì›¹ ê°œë°œì ì·¨ì—… ê³„íš
        - ê¸°ê°„ : yyyymmdd-yyyymmdd ex)20250118-20250201
        - í•„ìˆ˜ì¼ì • : ex) ëª¨ì˜ ì½”ë”©í…ŒìŠ¤íŠ¸ 1ì›” 31ì¼
        - ë¹„ê³  : ex) ì²« ë²ˆì§¸ ì£¼ì—ëŠ” ì±…ìœ¼ë¡œ ê³µë¶€í•  ê²ƒì„.
        
    """
    gpt_insert_info = {"ìƒë…„ì›”ì¼": info[0], "ì „ê³µ": info[1], "í¬ë§ì§ì¢…": info[2], "ì·¨ì—…ê¸°ê°„(ë…„)": info[3][0],"ì·¨ì—…ê¸°ê°„(ì›”)": info[3][1:], "ì¼ì •ì œëª©": info[4], "ê¸°ê°„": info[5], "í•„ìˆ˜ì¼ì •": info[6], "ë¹„ê³ ": info[7]}
    print(gpt_insert_info)
    # systemMessageRaw = """  ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì •ë³´ì™€ í¬ë§ ì§ë¬´ì— ë§ì¶° íš¨ê³¼ì ì¸ ë§¤ì¼ì˜ ì¼ì •ì„ ì‹œê°„ë³„ë¡œ ì¶”ì²œí•˜ì„¸ìš”. 
    #                         ì‚¬ìš©ìëŠ” ìƒë…„ì›”ì¼, ì „ê³µ, í¬ë§ì§ì¢…, ì·¨ì—… ëª©í‘œ ê¸°ê°„(ë…„ ë‹¨ìœ„), ë‹¨ê¸° ê³„íš ì œëª©, ëª©í‘œ ë‹¬ì„± ê¸°ê°„, í•„ìˆ˜ì ì¸ ì¼ì •, ê¸°íƒ€ ìš”ì²­ì„ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."""
    userMessageRaw =  """
                    ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì •ë³´ì™€ í¬ë§ ì§ë¬´ì— ë§ì¶° íš¨ê³¼ì ì¸ ë§¤ì¼ì˜ ì¼ì •ì„ ì‹œê°„ë³„ë¡œ ì¶”ì²œí•˜ì„¸ìš”. 
                    ì‚¬ìš©ìëŠ” ìƒë…„ì›”ì¼, ì „ê³µ, í¬ë§ì§ì¢…, ì·¨ì—… ëª©í‘œ ê¸°ê°„(ë…„ ë‹¨ìœ„), ë‹¨ê¸° ê³„íš ì œëª©, ëª©í‘œ ë‹¬ì„± ê¸°ê°„, í•„ìˆ˜ì ì¸ ì¼ì •, ê¸°íƒ€ ìš”ì²­ì„ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•©ë‹ˆë‹¤.
                            
                    [ì…ë ¥ ì˜ˆì‹œ]
                        - ìƒë…„ì›”ì¼ : 20020202
                        - ì „ê³µ : ì†Œí”„íŠ¸ì›¨ì–´
                        - í¬ë§ì§ì¢… : ì›¹ ê°œë°œì
                        - ì·¨ì—… ëª©í‘œ ê¸°ê°„: 0.25
                        - ë‹¨ê¸° ê³„íš ì œëª© : ì›¹ ê°œë°œì ì·¨ì—… ê³„íš
                        - ê¸°ê°„ : 20250118-20250120
                        - í•„ìˆ˜ì ì¸ ì¼ì • : 20250124ì— ëª¨ì˜ ì½”ë”©í…ŒìŠ¤íŠ¸ê°€ ìˆìŒ.
                        - ê¸°íƒ€ ìš”ì²­ : ì²« ë²ˆì§¸ ì£¼ì—ëŠ” ì±…ìœ¼ë¡œ ê³µë¶€í•  ê²ƒì„.

                    [ì¶œë ¥ ì˜ˆì‹œ]
                        {{
                          tasks: [
                                    {{
                                        title: â€œHTML+CSS+JS ì±… ì½ê¸°â€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 10,
                                            minute : 00
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 13,
                                            minute : 30
                                        }}
                                    }},
                                    {{
                                        title: â€œì¸í”„ëŸ° ê°•ì¢Œ ì‹œì²­â€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 14,
                                            minute : 00
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 17,
                                            minute : 00
                                        }}
                                    }},
                                    {{
                                        title: â€œë°°ìš´ ë‚´ìš© ë³µìŠµâ€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 17,
                                            minute : 30
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 18
                                            hour : 21,
                                            minute : 00
                                        }}
                                    }},
                                    {{
                                        title: â€œì–´ì œ í•™ìŠµí•œ ë‚´ìš© ì‹¤ìŠµâ€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 19
                                            hour : 10,
                                            minute : 00
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 19
                                            hour : 15,
                                            minute : 00
                                        }}
                                    }},
                                    {{
                                        title: â€œì‹¤ìŠµí•œ ë‚´ìš© ë°”íƒ•ìœ¼ë¡œ ê²Œì‹œíŒ í”„ë¡œì íŠ¸ ì œì‘â€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 19
                                            hour : 16,
                                            minute : 00
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 19
                                            hour : 21,
                                            minute : 00
                                        }}
                                    }},
                                    {{
                                        title: â€œì–´ì œ ë§Œë“¤ë˜ ê²Œì‹œíŒ í”„ë¡œì íŠ¸ ì™„ì„±â€,
                                        startDate: {{
                                            year: 2025
                                            month : 1
                                            day : 20
                                            hour : 10,
                                            minute : 00
                                        }},
                                        endDate: {{
                                            year: 2025
                                            month : 1
                                            day : 19
                                            hour : 21,
                                            minute : 00
                                        }}
                                    }},
                                ]

                        }}

                    ëª¨ë“  ì¶”ì²œ ì¼ì •ì€ ì‹¤í˜„ ê°€ëŠ¥í•˜ë„ë¡ ìƒëµ ë° ì¤‘ëµ ì—†ì´ ëª¨ë“  ë‚ ì§œë§ˆë‹¤ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.
                    [ì¶œë ¥ ì˜ˆì‹œ]ì˜ í˜•ì‹ì„ ë²—ì–´ë‚˜ëŠ” ëª¨ë“  ì¶œë ¥ì€ ê¸ˆì§€í•©ë‹ˆë‹¤.
                    í•˜ë£¨ ì¼ì •ì€ ì‹œì‘ ì‹œì‘ 10ì‹œ ëë‚˜ëŠ” ì‹œê°„ 21ì‹œë¥¼ ì¤€ìˆ˜í•´ ì£¼ì„¸ìš”.
                    ë˜í•œ ë§¤ì¼ë§¤ì¼ ê°™ì€ ì¼ì •ì„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•©ë‹ˆë‹¤.
                    title í•­ëª©ì€ í•œêµ­ì–´ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
                    json í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ ì£¼ì„¸ìš”.
                    
                    [ì…ë ¥]
                    - ìƒë…„ì›”ì¼ : {birthday}
                    - ì „ê³µ : {major}
                    - í¬ë§ì§ì¢… : {hope}
                    - ì·¨ì—… ëª©í‘œ ê¸°ê°„: {employperiodyear}ë…„ {employperiodmonth}ê°œì›”
                    - ë‹¨ê¸° ê³„íš ì œëª© : {title}
                    - ê¸°ê°„ : {planperiod}
                    - í•„ìˆ˜ì ì¸ ì¼ì • : {necessary}
                    - ê¸°íƒ€ ìš”ì²­ : {extra}
                    """.format(birthday = gpt_insert_info["ìƒë…„ì›”ì¼"], major = gpt_insert_info["ì „ê³µ"], hope = gpt_insert_info["í¬ë§ì§ì¢…"], employperiodyear = gpt_insert_info["ì·¨ì—…ê¸°ê°„(ë…„)"], employperiodmonth = gpt_insert_info["ì·¨ì—…ê¸°ê°„(ì›”)"], title = gpt_insert_info["ì¼ì •ì œëª©"], planperiod = gpt_insert_info["ê¸°ê°„"], necessary = gpt_insert_info["í•„ìˆ˜ì¼ì •"], extra = gpt_insert_info["ë¹„ê³ "])
                    
                    

    gpt_raw = gpt_communication(systemmessage=None, usermessage=userMessageRaw)
    gpt_content = gpt_raw.model_dump()["choices"][0]["message"]["content"]
    
    # # ` ```json ` ë° ` ``` ` ì œê±°
    # cleaned_content = gpt_content.replace("```json", "").replace("```", "").strip()
    print(gpt_content)
# ë¬¸ìì—´ì„ JSONìœ¼ë¡œ ë³€í™˜
    json_data = json.loads(gpt_content)
    print("\n\n\n", json_data)
    
        
    return json_data


@router.get("/evaluateSchedule", summary="ì…ë ¥ëœ ì¼ì • í‰ê°€")
async def feedback(tasks: List[str] = Query(..., description="ì‹¤ì œ ì´í–‰ ëª©ë¡"), isChecked: List[bool] = Query(..., description="ì‹¤ì œ ì´í–‰ ì—¬ë¶€")):
    
    """
    ì‹¤ì œ ì‚¬ìš©ìê°€ ì´í–‰í•œ ì¼ì •ì„ í‰ê°€í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
    - í˜•ì‹
    - /evaluateSchedule?tasks=xxx?tasks=yyy?tasks=zzz&isChecked=True?isChecked=False?isChecked=True
        - task : ex) ê¸°ì´ˆ PHP ë¬¸ë²• ê³µë¶€, ì‹¤ìŠµí•œ ë‚´ìš© ë°”íƒ•ìœ¼ë¡œ ê²Œì‹œíŒ í”„ë¡œì íŠ¸ ì œì‘ ë“±
        - isChecked : True / False
        
    """
    if len(tasks) != len(isChecked):
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="Taskì™€ isCheckedì˜ ê¸¸ì´ê°€ ë‹¤ë¦„."
        )
    gpt_insert_info = dict()
    for i in range(len(tasks)):
        gpt_insert_info[tasks[i]] = isChecked[i]
    
    print(gpt_insert_info)
    # systemMessageRaw = """  ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì •ë³´ì™€ í¬ë§ ì§ë¬´ì— ë§ì¶° íš¨ê³¼ì ì¸ ë§¤ì¼ì˜ ì¼ì •ì„ ì‹œê°„ë³„ë¡œ ì¶”ì²œí•˜ì„¸ìš”. 
    #                         ì‚¬ìš©ìëŠ” ìƒë…„ì›”ì¼, ì „ê³µ, í¬ë§ì§ì¢…, ì·¨ì—… ëª©í‘œ ê¸°ê°„(ë…„ ë‹¨ìœ„), ë‹¨ê¸° ê³„íš ì œëª©, ëª©í‘œ ë‹¬ì„± ê¸°ê°„, í•„ìˆ˜ì ì¸ ì¼ì •, ê¸°íƒ€ ìš”ì²­ì„ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."""
    userMessageRaw =  """
                    ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì •ë³´ì™€ í¬ë§ ì§ë¬´ì— ë§ì¶° ë‹¹ì‹ ì´ ì¶”ì²œí–ˆë˜ ì¼ì •ì˜ ì´í–‰ ê²°ê³¼ë¥¼ í‰ê°€í•˜ì„¸ìš”. 
                    ì‚¬ìš©ìëŠ” ë‹¹ì‹ ì´ ì¶”ì²œí–ˆë˜ ì¼ì •ê³¼ ì´í–‰ì—¬ë¶€ë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•  ê²ƒì…ë‹ˆë‹¤.
                            
                    [ì…ë ¥ ì˜ˆì‹œ]
                        -{{'ì¸í”„ëŸ° ê°•ì¢Œ ì‹œì²­':True, 'ì–´ì œ ê³µë¶€í–ˆë˜ ë‚´ìš© ì‹¤ìŠµ':True, 'ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš© ë³µìŠµ':False, 'í”„ë¡œì íŠ¸ ê³„íšì„œ ì‘ì„±':False}}

                    [ì¶œë ¥ ì˜ˆì‹œ]
                    
                    {{'tasks':'ğŸ“Š ë‹¹ì‹ ì˜ í•™ìŠµ ì´í–‰ë¥ ì„ í‰ê°€í–ˆìŠµë‹ˆë‹¤.

                    ğŸ¯ ì´í–‰ ì ìˆ˜: 50ì  (2/4 ì™„ë£Œ)

                    âœ… ì™„ë£Œí•œ ì¼ì • (ì„±ê³µ)
                    - ì¸í”„ëŸ° ê°•ì¢Œ ì‹œì²­
                    - ì–´ì œ ê³µë¶€í–ˆë˜ ë‚´ìš© ì‹¤ìŠµ

                    âŒ ë¯¸ì´í–‰ ì¼ì • (ê°œì„  í•„ìš”)
                    - ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš© ë³µìŠµ â†’ í•˜ë£¨ 10ë¶„ì´ë¼ë„ ë³µìŠµí•´ ë³´ì„¸ìš”!
                    - í”„ë¡œì íŠ¸ ê³„íšì„œ ì‘ì„± â†’ ê°„ë‹¨í•œ ê°œìš”ë¼ë„ ë¨¼ì € ì •ë¦¬í•´ë³´ë©´ ì¢‹ìŠµë‹ˆë‹¤.

                    ğŸ’¡ ì˜¤ëŠ˜ì˜ í”¼ë“œë°±
                    ì˜¤ëŠ˜ ëª©í‘œì˜ ì ˆë°˜ì„ ë‹¬ì„±í–ˆì–´ìš”! í•˜ì§€ë§Œ ë³µìŠµê³¼ í”„ë¡œì íŠ¸ ì§„í–‰ì€ ê¾¸ì¤€í•¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  
                    ë‚´ì¼ì€ ì¡°ê¸ˆ ë” ì§‘ì¤‘í•´ì„œ ëª©í‘œë¥¼ 70% ì´ìƒ ë‹¬ì„±í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•´ë³´ì„¸ìš”!  
                    ì‘ì€ ìŠµê´€ì´ í° ì„±ì¥ì„ ë§Œë“­ë‹ˆë‹¤. í™”ì´íŒ…! ğŸš€'}}
                    


                    --------------------------------------------------------
                    [ì¶œë ¥ ì˜ˆì‹œ]ì˜ í˜•ì‹ì„ ë²—ì–´ë‚˜ëŠ” ëª¨ë“  ì¶œë ¥ì€ ê¸ˆì§€í•©ë‹ˆë‹¤.
                    jsoní˜•ì‹ìœ¼ë¡œ ë‹µë³€í•´ ì£¼ì„¸ìš”.
                    
                    
                    [ì…ë ¥]
                    - {dictionary}
                    """.format(dictionary = gpt_insert_info)
                    
                    

    gpt_raw = gpt_communication(systemmessage=None, usermessage=userMessageRaw)
    gpt_content = gpt_raw.model_dump()["choices"][0]["message"]["content"]

    print("\n\n\n", gpt_content)
    
            
    return json.loads(gpt_content)


@router.get("/manageTeam", summary="ë¹„ìŠ·í•œ ì¼ì •ë¼ë¦¬ ë¬¶ê¸°")
async def feedback(tasks: List[str] = Query(..., description="ì‚¬ìš©ì ì¼ì • ëª©ë¡")):
    
    """
    tasks(listíƒ€ì…) ì„ ì…ë ¥ë°›ìœ¼ë©´ ì‹œìŠ¤í…œ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ì„ë² ë””ë“œ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ì¸ê³µì§€ëŠ¥ ê°œë°œì ì·¨ì—… ì¤€ë¹„, 
    ì›¹ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ë””ìì´ë„ˆ ì·¨ì—… ì¤€ë¹„, ì›¹ ìŠ¤í„°ë””, ì¸ê³µì§€ëŠ¥ ìŠ¤í„°ë””, ì„ë² ë””ë“œ ìŠ¤í„°ë””, í”„ë¡œì íŠ¸ ì¤€ë¹„, ë””ìì¸ ìŠ¤í„°ë”” ì¤‘ 
    ê°€ì¥ ê°€ê¹ë‹¤ê³  íŒë‹¨ë˜ëŠ” í•­ëª©ì„ ë°˜í™˜í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ì…ë‹ˆë‹¤.
    
    - í˜•ì‹
    - /manageTeam?tasks='ë•¡ë•¡í•˜ê¸°'?tasks='ì‘ì‘í•˜ê¸°'?tasks='ì•™ì•™í•˜ê¸°'
        - tasks: ex) 'ì‰ì‰í•˜ê¸°' (str) <- listë¼ tasksë“¤ë¼ë¦¬ëŠ” ?ë¡œ êµ¬ë¶„í•´ì•¼í•¨
        
    """
    gpt_insert_info = list()
    for i in range(len(tasks)):
        gpt_insert_info.append(tasks[i])
    print(gpt_insert_info)
    # systemMessageRaw = """  ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì •ë³´ì™€ í¬ë§ ì§ë¬´ì— ë§ì¶° íš¨ê³¼ì ì¸ ë§¤ì¼ì˜ ì¼ì •ì„ ì‹œê°„ë³„ë¡œ ì¶”ì²œí•˜ì„¸ìš”. 
    #                         ì‚¬ìš©ìëŠ” ìƒë…„ì›”ì¼, ì „ê³µ, í¬ë§ì§ì¢…, ì·¨ì—… ëª©í‘œ ê¸°ê°„(ë…„ ë‹¨ìœ„), ë‹¨ê¸° ê³„íš ì œëª©, ëª©í‘œ ë‹¬ì„± ê¸°ê°„, í•„ìˆ˜ì ì¸ ì¼ì •, ê¸°íƒ€ ìš”ì²­ì„ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•©ë‹ˆë‹¤."""
    userMessageRaw =  """
                    ë‹¹ì‹ ì€ ì·¨ì—… ì»¨ì„¤í„´íŠ¸ AIì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì¼ì •ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ìŒ ëª©ë¡ ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ í•­ëª©ì„ ë°˜í™˜í•˜ì„¸ìš”. 
                    ëª©ë¡ :  [ì‹œìŠ¤í…œ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ì„ë² ë””ë“œ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ì¸ê³µì§€ëŠ¥ ê°œë°œì ì·¨ì—… ì¤€ë¹„, 
                            ì›¹ ê°œë°œì ì·¨ì—… ì¤€ë¹„, ë””ìì´ë„ˆ ì·¨ì—… ì¤€ë¹„, ì›¹ ìŠ¤í„°ë””, ì¸ê³µì§€ëŠ¥ ìŠ¤í„°ë””, ì„ë² ë””ë“œ ìŠ¤í„°ë””, í”„ë¡œì íŠ¸ ì¤€ë¹„, ë””ìì¸ ìŠ¤í„°ë””]
                    
                    [ì…ë ¥ ì˜ˆì‹œ]
                        - ['ë¡œë´‡ ê³µí•™ ê¸°ë³¸ ì´ë¡  ê³µë¶€','ë¡œë´‡ í”„ë¡œê·¸ë˜ë° ì‹¤ìŠµ','í”„ë¡œì íŠ¸ ê³„íš ìˆ˜ë¦½','í”„ë¡œì íŠ¸ ì½”ë“œ ë¦¬ë·° ë° ìˆ˜ì •']

                    [ì¶œë ¥ ì˜ˆì‹œ]
                        - {{'tasks':'ì„ë² ë””ë“œ ìŠ¤í„°ë””'}}

                    [ì¶œë ¥ ì˜ˆì‹œ]ì˜ í˜•ì‹ì„ ë²—ì–´ë‚˜ëŠ” ëª¨ë“  ì¶œë ¥ì€ ê¸ˆì§€í•©ë‹ˆë‹¤.
                    jsoní˜•íƒœë¡œ ë‹µë³€í•˜ì„¸ìš”.
                    [ì…ë ¥]
                        - {tasklist}
                        
                    """.format(tasklist=gpt_insert_info)
                    

    gpt_raw = gpt_communication(systemmessage=None, usermessage=userMessageRaw)
    gpt_content = gpt_raw.model_dump()["choices"][0]["message"]["content"]

    print("\n\n\n", gpt_content)
    
            
    return json.loads(gpt_content)

